{"version":3,"file":"VoiceSearch.vue.js","sources":["../../../../src/components/VoiceSearch.vue"],"sourcesContent":["<template>\n  <div\n    v-if=\"state\"\n    :class=\"suit()\"\n  >\n    <slot v-bind=\"rootSlotProps\">\n      <button\n        type=\"button\"\n        :class=\"suit('button')\"\n        :title=\"state.isBrowserSupported ? buttonTitle : disabledButtonTitle\"\n        :disabled=\"!state.isBrowserSupported\"\n        @click=\"handleClick\"\n      >\n        <slot\n          name=\"buttonText\"\n          v-bind=\"innerSlotProps\"\n        >\n          <svg\n            v-bind=\"buttonSvgAttrs\"\n            v-if=\"errorNotAllowed\"\n          >\n            <line\n              x1=\"1\"\n              y1=\"1\"\n              x2=\"23\"\n              y2=\"23\"\n            />\n            <path d=\"M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6\" />\n            <path d=\"M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23\" />\n            <line\n              x1=\"12\"\n              y1=\"19\"\n              x2=\"12\"\n              y2=\"23\"\n            />\n            <line\n              x1=\"8\"\n              y1=\"23\"\n              x2=\"16\"\n              y2=\"23\"\n            />\n          </svg>\n          <svg\n            v-bind=\"buttonSvgAttrs\"\n            v-else\n          >\n            <path\n              d=\"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z\"\n              :fill=\"state.isListening ? 'currentColor' : 'none'\"\n            />\n            <path d=\"M19 10v2a7 7 0 0 1-14 0v-2\" />\n            <line\n              x1=\"12\"\n              y1=\"19\"\n              x2=\"12\"\n              y2=\"23\"\n            />\n            <line\n              x1=\"8\"\n              y1=\"23\"\n              x2=\"16\"\n              y2=\"23\"\n            />\n          </svg>\n        </slot>\n      </button>\n      <div :class=\"suit('status')\">\n        <slot\n          name=\"status\"\n          v-bind=\"innerSlotProps\"\n        >\n          <p>{{ state.voiceListeningState.transcript }}</p>\n        </slot>\n      </div>\n    </slot>\n  </div>\n</template>\n\n<script>\nimport { connectVoiceSearch } from 'instantsearch.js/es/connectors';\nimport { createSuitMixin } from '../mixins/suit';\nimport { createWidgetMixin } from '../mixins/widget';\n\nexport default {\n  name: 'AisVoiceSearch',\n  mixins: [\n    createWidgetMixin(\n      {\n        connector: connectVoiceSearch,\n      },\n      {\n        $$widgetType: 'ais.voiceSearch',\n      }\n    ),\n    createSuitMixin({ name: 'VoiceSearch' }),\n  ],\n  props: {\n    searchAsYouSpeak: {\n      type: Boolean,\n      required: false,\n      default: undefined,\n    },\n    language: {\n      type: String,\n      default: undefined,\n    },\n    additionalQueryParameters: {\n      type: Object,\n      default: undefined,\n    },\n    buttonTitle: {\n      type: String,\n      required: false,\n      default: 'Search by voice',\n    },\n    disabledButtonTitle: {\n      type: String,\n      required: false,\n      default: 'Search by voice (not supported on this browser)',\n    },\n  },\n  data() {\n    return {\n      buttonSvgAttrs: {\n        xmlns: 'http://www.w3.org/2000/svg',\n        width: '16',\n        height: '16',\n        viewBox: '0 0 24 24',\n        fill: 'none',\n        stroke: 'currentColor',\n        strokeWidth: '2',\n        strokeLinecap: 'round',\n        strokeLinejoin: 'round',\n      },\n    };\n  },\n  computed: {\n    widgetParams() {\n      return {\n        searchAsYouSpeak: this.searchAsYouSpeak,\n        language: this.language,\n        additionalQueryParameters: this.additionalQueryParameters,\n      };\n    },\n    errorNotAllowed() {\n      return (\n        this.state.voiceListeningState.status === 'error' &&\n        this.state.voiceListeningState.errorCode === 'not-allowed'\n      );\n    },\n    rootSlotProps() {\n      return {\n        isBrowserSupported: this.state.isBrowserSupported,\n        isListening: this.state.isListening,\n        toggleListening: this.state.toggleListening,\n        voiceListeningState: this.state.voiceListeningState,\n      };\n    },\n    innerSlotProps() {\n      return {\n        status: this.state.voiceListeningState.status,\n        errorCode: this.state.voiceListeningState.errorCode,\n        isListening: this.state.isListening,\n        transcript: this.state.voiceListeningState.transcript,\n        isSpeechFinal: this.state.voiceListeningState.isSpeechFinal,\n        isBrowserSupported: this.state.isBrowserSupported,\n      };\n    },\n  },\n  methods: {\n    handleClick(event) {\n      event.currentTarget.blur();\n      this.state.toggleListening();\n    },\n  },\n};\n</script>\n"],"names":["render","name","mixins","createWidgetMixin","connector","connectVoiceSearch","$$widgetType","createSuitMixin","props","searchAsYouSpeak","type","Boolean","required","default","undefined","language","String","additionalQueryParameters","Object","buttonTitle","disabledButtonTitle","data","buttonSvgAttrs","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","computed","widgetParams","this","errorNotAllowed","state","voiceListeningState","status","errorCode","rootSlotProps","isBrowserSupported","isListening","toggleListening","innerSlotProps","transcript","isSpeechFinal","methods","handleClick","event","currentTarget","blur"],"mappings":"uMAmFe,CAACA,+yCACdC,KAAM,iBACNC,OAAQ,CACNC,EACE,CACEC,UAAWC,GAEb,CACEC,aAAc,oBAGlBC,EAAgB,CAAEN,KAAM,iBAE1BO,MAAO,CACLC,iBAAkB,CAChBC,KAAMC,QACNC,UAAU,EACVC,aAASC,GAEXC,SAAU,CACRL,KAAMM,OACNH,aAASC,GAEXG,0BAA2B,CACzBP,KAAMQ,OACNL,aAASC,GAEXK,YAAa,CACXT,KAAMM,OACNJ,UAAU,EACVC,QAAS,mBAEXO,oBAAqB,CACnBV,KAAMM,OACNJ,UAAU,EACVC,QAAS,oDAGbQ,sBACS,CACLC,eAAgB,CACdC,MAAO,6BACPC,MAAO,KACPC,OAAQ,KACRC,QAAS,YACTC,KAAM,OACNC,OAAQ,eACRC,YAAa,IACbC,cAAe,QACfC,eAAgB,WAItBC,SAAU,CACRC,8BACS,CACLxB,iBAAkByB,KAAKzB,iBACvBM,SAAUmB,KAAKnB,SACfE,0BAA2BiB,KAAKjB,4BAGpCkB,iCAE8C,UAA1CD,KAAKE,MAAMC,oBAAoBC,QACc,gBAA7CJ,KAAKE,MAAMC,oBAAoBE,WAGnCC,+BACS,CACLC,mBAAoBP,KAAKE,MAAMK,mBAC/BC,YAAaR,KAAKE,MAAMM,YACxBC,gBAAiBT,KAAKE,MAAMO,gBAC5BN,oBAAqBH,KAAKE,MAAMC,sBAGpCO,gCACS,CACLN,OAAQJ,KAAKE,MAAMC,oBAAoBC,OACvCC,UAAWL,KAAKE,MAAMC,oBAAoBE,UAC1CG,YAAaR,KAAKE,MAAMM,YACxBG,WAAYX,KAAKE,MAAMC,oBAAoBQ,WAC3CC,cAAeZ,KAAKE,MAAMC,oBAAoBS,cAC9CL,mBAAoBP,KAAKE,MAAMK,sBAIrCM,QAAS,CACPC,qBAAYC,GACVA,EAAMC,cAAcC,YACff,MAAMO"}